---
title: "Schema Validation"
icon: "shield-check"
---
This guideÂ shows you how to validateÂ document structureÂ using Joyfill's schema validation system.

### **What is Schema Validation**

Schema validation checksÂ if your JSON document follows the correctÂ Joyfill document structure before creatingÂ a form.

### **Enabling/Disabling Schema Validation**

```swift
let documentEditor = DocumentEditor(
    document: document,
    validateSchema: true  // Default is true
)

// Check for schema errors
if let error = documentEditor.schemaError {
    print("Schema validation failed: \(error.message)")
    // Handle error - show message, prevent form display, etc.
}
```

### **Manual Validation**

```swift
let schemaManager = JoyfillSchemaManager()

if let error = schemaManager.validateSchema(document: document) {
   print("Schema validation failed: \(error.message)")
   print("Error code: \(error.code)")
   print("Errors: \(String(describing: error.error))")
} else {
   print("Document schema is valid")
}
```

### **How Schema Validation Works**

WhenÂ validateSchema =Â true:

1. **DocumentÂ is validated**Â against the Joyfill schema duringÂ editor creation
2. **IfÂ validation fails**, an error is setÂ andÂ onErrorÂ callbackÂ is triggered
3. **If validation passes**, the editor is created normally

**CommonÂ Error Codes**

| Error Code | Description | Solution |
| --- | --- | --- |
| ERROR_SCHEMA_VALIDATION | Document structureÂ is invalid | FixÂ document structure |
| ERROR_SCHEMA_VERSION | Version incompatibility | UpdateÂ SDK or document |

**FormChangeEvent Integration**

SchemaÂ errors automatically trigger theÂ onErrorÂ event:

```swift
func onError(error: Joyfill.JoyfillError) {
        switch error {
        case .schemaValidationError(let schemaError):
            print("âŒ Schema Error: \(schemaError)")
        case .schemaVersionError(let versionError):
            print("âŒ Schema Error: \(versionError)")
        }
        print("Error occurred: \(error)")
    }
```

## **Important Notes**

> âš ï¸Â **DefaultÂ Behavior**: Schema validation isÂ **enabled by default**Â (validateSchema = true)

>Â ðŸš«Â **Not Recommended**: Disabling schemaÂ validation can lead to crashes - onlyÂ use for testing

>Â ðŸ”Â **ErrorÂ Details**: Schema errors includeÂ both user-friendly messages and technical details

>Â âš¡Â **Validation Timing**: Schema validation happens duringÂ editor creation, not during form interaction